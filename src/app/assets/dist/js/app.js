var Route=function(t,e){var n={routes:[],defaultRoot:"/",notFoundRoute:"/404",urlPrefix:"#",viewContainer:".some-div-class",loadingTemplate:"<p>Some loading message...</p>",getTemplate:function(t){if(t.template&&(o.renderRoute(n.tp(t.template,t.options)),"function"==typeof t.callback&&t.callback(t.options)),t.templateUrl){o.renderRoute(n.loadingTemplate);var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status?(t.template=e.responseText,o.renderRoute(n.tp(e.responseText,t.options)),"function"==typeof t.callback&&t.callback(t.options)):404==e.status&&o.navigateRoute(n.notFoundRoute)},e.open("GET",t.templateUrl,!0),e.send()}},getFragment:function(){""===e.location.hash&&(e.location.hash=n.urlPrefix+n.defaultRoot);var t=new RegExp(n.urlPrefix+"(.*)$"),o=e.location.href.match(t),i=o?o[1]:"";return i.toString()},tp:function(t,e){for(var n,o=/<%([^%>]+)?%>/g,i=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,r="var r=[];\n",a=0,l=function(t,e){return r+=e?t.match(i)?t+"\n":"r.push("+t+");\n":""!==t?'r.push("'+t.replace(/"/g,'\\"')+'");\n':"",l};n=o.exec(t);)l(t.slice(a,n.index))(n[1],!0),a=n.index+n[0].length;return l(t.substr(a,t.length-a)),r+='return r.join("");',new Function(r.replace(/[\r\t\n]/g,"")).apply(e)}},o={setViewContainer:function(t){return n.viewContainer=t,o},setRoot:function(t){return n.defaultRoot=t,o},setNotFoundRoute:function(t){return n.notFoundRoute=t,o},setLoadingTemplate:function(t){return n.loadingTemplate=t,o},addRoute:function(t){return"object"==typeof t&&t.url&&(t.template||t.templateUrl)?n.routes.push(t):console.log("This route has a problem, it cant be added!",t),o},checkRoute:function(t){for(var e,i,r=t||n.getFragment(),a={},l=0;l<n.routes.length;l++){var u=n.routes[l],c=new RegExp("^"+u.url.replace(/(:\w+)/g,"([\\w-]+)")+"$");if(e=r.match(c)){if(e.shift(),i=u.url.match(/(:\w+)/g))for(var s=0;s<i.length;s++)a[i[s].slice(1)]=e[s];return u.options||(u.options={}),u.options.params=a,n.getTemplate(u),o}}return o.navigateRoute(n.notFoundRoute),o},listen:function(){var t,e=null,i=function(){e!==n.getFragment()&&(e=n.getFragment(),o.checkRoute(e))};return clearInterval(t),t=setInterval(i,50),o},renderRoute:function(e){return t.querySelector(n.viewContainer).innerHTML=e,o},navigateRoute:function(t){return t=t?t:"",e.location.href=e.location.href.replace(/#(.*)$/,n.urlPrefix+t),o},setHashbang:function(t){return n.urlPrefix=t===!0?"#!":"#",o}};return o}(document,window),http404Controller=function(t){var e=function(){};return{initialize:e}}(jQuery),footerController=function(t){var e=function(){t(".footer-container").load("/views/layout/footer.html",function(){t.getJSON("configs/app.json",function(e){t.each(e,function(e,n){t(".app-name").text(n.brand.name),t(".app-version").text(n.brand.version),t(".app-environment").text(n.brand.environment),t(".app-company").text(n.brand.company)})})})};return{initialize:e}}(jQuery),headerController=function(t){var e=function(){t(".header-container").load("/views/layout/header.html",function(){t.getJSON("configs/app.json",function(e){t.each(e,function(e,n){t(".app-name").text(n.brand.name)})})})};return{initialize:e}}(jQuery),aboutController=function(t){var e=function(){t(".content-container").hide().fadeIn(750)};return{initialize:e}}(jQuery),contactController=function(t){var e=function(){t(".content-container").hide().fadeIn(750)};return{initialize:e}}(jQuery),homeController=function(t){var e=function(){t(".content-container").hide().fadeIn(750)};return{initialize:e}}(jQuery),appStartService=function(t){var e=function(){headerController.initialize(),footerController.initialize(),routeService.initialize()};return{initialize:e}}(jQuery),routeService=function(t){var e=function(){function t(){var t=window.location.hash;document.querySelector(".app-url-container").innerHTML=t}Route.setRoot("/").setViewContainer(".view-container").setNotFoundRoute("/404").setHashbang(!1).setLoadingTemplate().addRoute({url:"/",templateUrl:"views/global/home.html",options:{url:"/"},callback:function(e){document.title="Home",homeController.initialize(),t()}}).addRoute({url:"/404",templateUrl:"views/error/http404.html",options:{url:"/404"},callback:function(e){document.title="Error",http404Controller.initialize(),t()}}).addRoute({url:"/about",templateUrl:"views/global/about.html",options:{url:"/about"},callback:function(e){document.title="About",aboutController.initialize(),t()}}).addRoute({url:"/contact",templateUrl:"views/global/contact.html",options:{url:"/contact"},callback:function(e){document.title="Contact",contactController.initialize(),t()}}).addRoute({url:"/users",template:'<div class="container-fluid"><div class="body-content"><div class="row"><div class="col-md-12"><div class="jumbotron well"><h2>Users</h2><p>This view content is loaded from a templated view!</p></div><div class="well"><div class="app-url-container"></div></div></div></div></div></div>',options:{url:"/users"},callback:function(e){document.title="Users",t()}}).addRoute({url:"/user/:id",template:'<div class="container-fluid"><div class="body-content"><div class="row"><div class="col-md-12"><div class="jumbotron well"><h2>User</h2><p>This view content is loaded from a templated view with arguments!</p></div><div class="well"><div class="app-url-container"></div></div></div></div></div></div>',options:{url:"/user/:id"},callback:function(e){document.title="User",t()}}).listen()};return{initialize:e}}(jQuery);$(function(){appStartService.initialize()});