var Route=function(e,t){var n={routes:[],defaultRoot:"/",notFoundRoute:"/404",urlPrefix:"#",viewContainer:".some-div-class",loadingTemplate:"<p>Some loading message...</p>",getTemplate:function(e){if(e.template&&(o.renderRoute(n.tp(e.template,e.options)),"function"==typeof e.callback&&e.callback(e.options)),e.templateUrl){o.renderRoute(n.loadingTemplate);var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status?(e.template=t.responseText,o.renderRoute(n.tp(t.responseText,e.options)),"function"==typeof e.callback&&e.callback(e.options)):404==t.status&&o.navigateRoute(n.notFoundRoute)},t.open("GET",e.templateUrl,!0),t.send()}},getFragment:function(){""===t.location.hash&&(t.location.hash=n.urlPrefix+n.defaultRoot);var e=new RegExp(n.urlPrefix+"(.*)$"),o=t.location.href.match(e),a=o?o[1]:"";return a.toString()},tp:function(e,t){for(var n,o=/<%([^%>]+)?%>/g,a=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,i="var r=[];\n",r=0,l=function(e,t){return i+=t?e.match(a)?e+"\n":"r.push("+e+");\n":""!==e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",l};n=o.exec(e);)l(e.slice(r,n.index))(n[1],!0),r=n.index+n[0].length;return l(e.substr(r,e.length-r)),i+='return r.join("");',new Function(i.replace(/[\r\t\n]/g,"")).apply(t)}},o={setViewContainer:function(e){return n.viewContainer=e,o},setRoot:function(e){return n.defaultRoot=e,o},setNotFoundRoute:function(e){return n.notFoundRoute=e,o},setLoadingTemplate:function(e){return n.loadingTemplate=e,o},addRoute:function(e){return"object"==typeof e&&e.url&&(e.template||e.templateUrl)?n.routes.push(e):console.log("This route has a problem, it cant be added!",e),o},checkRoute:function(e){for(var t,a,i=e||n.getFragment(),r={},l=0;l<n.routes.length;l++){var c=n.routes[l],u=new RegExp("^"+c.url.replace(/(:\w+)/g,"([\\w-]+)")+"$");if(t=i.match(u)){if(t.shift(),a=c.url.match(/(:\w+)/g))for(var s=0;s<a.length;s++)r[a[s].slice(1)]=t[s];return c.options||(c.options={}),c.options.params=r,n.getTemplate(c),o}}return o.navigateRoute(n.notFoundRoute),o},listen:function(){var e,t=null,a=function(){t!==n.getFragment()&&(t=n.getFragment(),o.checkRoute(t))};return clearInterval(e),e=setInterval(a,50),o},renderRoute:function(t){return e.querySelector(n.viewContainer).innerHTML=t,o},navigateRoute:function(e){return e=e?e:"",t.location.href=t.location.href.replace(/#(.*)$/,n.urlPrefix+e),o},setHashbang:function(e){return n.urlPrefix=e===!0?"#!":"#",o}};return o}(document,window),jsonArrayController=function(e){function t(){e.getJSON("data/demo.json",function(t){var n='<ul class="nav nav-tabs nav-justified">';e.each(t.environments,function(e,t){n+='<li class="text-uppercase"><a data-toggle="tab" href="#'+t.name+'">'+t.name+"</a></li>"}),n+="</ul>",n+='<div class="tab-content">',n+='<br/">',e.each(t.environments,function(t,o){n+='<div id="'+o.name+'"class="tab-pane fade in">',n+='<div class="row">',e.each(o.scopes,function(t,o){n+='<div class="col-md-6">',n+='<div class="panel panel-default">',n+='<div class="panel-heading text-uppercase">'+o.name+"</div>",n+='<div class="panel-body">',e.each(o.tiers,function(t,o){n+='<div class="col-md-6">',n+='<div class="panel panel-default">',n+='<div class="panel-heading text-uppercase">tier: '+o.name+"</div>",n+='<div class="panel-body">',e.each(o.servers,function(e,t){n+='<div class="col-md-12">',n+='<div class="panel panel-default">',n+='<div class="panel-heading text-uppercase">server: '+t.name+"</div>",n+='<div class="panel-body">',n+='<p class="text-uppercase">'+t.status,n+='<p class="text-uppercase">objects: '+t.objects,n+="</div>",n+="</div>",n+="</div>"}),n+="</div>",n+="</div>",n+="</div>"}),n+="</div>",n+="</div>",n+="</div>"}),n+="</div>",n+="</div>"}),n+="</div>",e("#demo-content").append(n),e("#demo-content .nav-tabs a:first").tab("show")})}var n=function(){t()};return{initialize:n}}(jQuery),http404Controller=function(e){var t=function(){};return{initialize:t}}(jQuery),aboutController=function(e){var t=function(){e(".content-container").hide().fadeIn(750)};return{initialize:t}}(jQuery),contactController=function(e){var t=function(){e(".content-container").hide().fadeIn(750)};return{initialize:t}}(jQuery),homeController=function(e){var t=function(){e(".content-container").hide().fadeIn(750)};return{initialize:t}}(jQuery),footerController=function(e){var t=function(){e(".footer-container").load("/views/layout/footer.html",function(){e.getJSON("configs/app.json",function(t){e.each(t,function(t,n){e(".app-name").text(n.brand.name),e(".app-version").text(n.brand.version),e(".app-environment").text(n.brand.environment),e(".app-company").text(n.brand.company)})})})};return{initialize:t}}(jQuery),headerController=function(e){var t=function(){e(".header-container").load("/views/layout/header.html",function(){e.getJSON("configs/app.json",function(t){e.each(t,function(t,n){e(".app-name").text(n.brand.name)})})})};return{initialize:t}}(jQuery),appStartService=function(e){var t=function(){headerController.initialize(),footerController.initialize(),routeService.initialize()};return{initialize:t}}(jQuery),routeService=function(e){var t=function(){function e(){var e=window.location.hash;document.querySelector(".app-url-container").innerHTML=e}Route.setRoot("/").setViewContainer(".view-container").setNotFoundRoute("/404").setHashbang(!1).setLoadingTemplate().addRoute({url:"/",templateUrl:"views/global/home.html",options:{url:"/"},callback:function(t){document.title="Home",homeController.initialize(),e()}}).addRoute({url:"/404",templateUrl:"views/error/http404.html",options:{url:"/404"},callback:function(t){document.title="Error",http404Controller.initialize(),e()}}).addRoute({url:"/about",templateUrl:"views/global/about.html",options:{url:"/about"},callback:function(t){document.title="About",aboutController.initialize(),e()}}).addRoute({url:"/contact",templateUrl:"views/global/contact.html",options:{url:"/contact"},callback:function(t){document.title="Contact",contactController.initialize(),e()}}).addRoute({url:"/users",template:'<div class="container-fluid"><div class="body-content"><div class="row"><div class="col-md-12"><div class="jumbotron well"><h2>Users</h2><p>This view content is loaded from a templated view!</p></div><div class="well"><div class="app-url-container"></div></div></div></div></div></div>',options:{url:"/users"},callback:function(t){document.title="Users",e()}}).addRoute({url:"/user/:id",template:'<div class="container-fluid"><div class="body-content"><div class="row"><div class="col-md-12"><div class="jumbotron well"><h2>User</h2><p>This view content is loaded from a templated view with arguments!</p></div><div class="well"><div class="app-url-container"></div></div></div></div></div></div>',options:{url:"/user/:id"},callback:function(t){document.title="User",e()}}).addRoute({url:"/json-array",templateUrl:"views/demo/json-array.html",options:{url:"/json-array"},callback:function(t){document.title="JSON Array",jsonArrayController.initialize(),e()}}).listen()};return{initialize:t}}(jQuery);$(function(){appStartService.initialize()});